<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Catch the Falling Stara</title>
        <style>
            body {
                margin: 0;
                background: #000;
                overflow: hidden;
                font-family: sans-serif;
                color: white;            
            }
            #gameCanvas {
                display: block;
                margin: 0 auto;
                background: linear-gradient(to top, #001, #112);
                border: 2px solid white;
            }
            #scoreBoard {
                text-align: center;
                font-size: 20px;
                margin-top: 10px;
            }
        </style>
    </head>
    <body>

        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <div id="scoreBoard">Score: 0 | Missed: 0</div>

        <script>
            const canvas = document.getElemenById("gameCanvas");
            const ctx = canvas.getContext("2d");

            const basket = {
                x: canvas.width / 2-30,
                y: canvas.height - 30,
                width: 60,
                height: 20,
                speed: 5
            };

            const stars = [];
            let score = 0;
            let missed = 0;
            let gameOver = false;
            let slowTimeActive = false;

            function drawBasket() {
                ctx.fillStyle = "#0f0";
                ctx.fillRect(basket.x, basket.y, basket.width, basket.height);
            }

            function drawStar(star) {
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, math.PI * 2);

                if (star.type === "gold") ctx.fillStyle = "#FFD700";
                else if (star.type === "shield") ctx.fillStyle = "#00f";
                else if (star.type === "slow") ctx.fillStyle = "a0f";

                ctx.fil();
                ctx.closePath();
            }

            function spawnStar() {
                const x = Math.random() * canvas.width;
                const typeChance = Math.random();
                let type = "normal";

                if (typeChance < 0.05) type = "gold";
                else if (typeChance < 0.10) type = "shield";
                else if (typeChance < 0.15) type = "slow";

                stars.push({ x, y: 0, radiusL 8, speed: 2 + Math.random() * 2, type });
            }

            function updateStars() {
    for (let i = stars.length - 1; i >= 0; i--) {
      const star = stars[i];
      star.y += star.speed;

      // Check for catch
      if (
        star.y + star.radius >= basket.y &&
        star.x >= basket.x &&
        star.x <= basket.x + basket.width
      ) {
        if (star.type === "gold") score += 5;
        else if (star.type === "shield") missed = Math.max(0, missed - 1);
        else if (star.type === "slow") activateSlowTime();
        else score++;

        stars.splice(i, 1);
      } else if (star.y > canvas.height) {
        stars.splice(i, 1);
        missed++;
        if (missed >= 5) gameOver = true;
      }
    }
  }

  function activateSlowTime() {
    if (slowTimeActive) return;
    slowTimeActive = true;
    stars.forEach(s => s.speed *= 0.5);
    setTimeout(() => {
      stars.forEach(s => s.speed *= 2);
      slowTimeActive = false;
    }, 5000);
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBasket();
    stars.forEach(drawStar);
  }

  function updateScoreBoard() {
    document.getElementById("scoreBoard").textContent = `Score: ${score} | Missed: ${missed}`;
  }

  function gameLoop() {
    if (!gameOver) {
      if (Math.random() < 0.03) spawnStar();
      updateStars();
      draw();
      updateScoreBoard();
      requestAnimationFrame(gameLoop);
    } else {
      ctx.fillStyle = "red";
      ctx.font = "30px sans-serif";
      ctx.fillText("Game Over!", canvas.width / 2 - 80, canvas.height / 2);
    }
  }

  document.addEventListener("keydown", function(e) {
    if (e.key === "ArrowLeft") basket.x -= basket.speed;
    if (e.key === "ArrowRight") basket.x += basket.speed;
    basket.x = Math.max(0, Math.min(canvas.width - basket.width, basket.x));
  });

  gameLoop();
</script>

</body>
</html>